{{i18n_ns "search"}}

{{#if dms}}
  <header>
    <span class="header_label search_mini">
      {{#feature flag="feature_teams_to_workspaces"}}
        <span class="header_label__text">{{#t}}Members{{/t}}</span>
      {{else}}
        <span class="header_label__text">{{#t}}Team members{{/t}}</span>
      {{/feature}}
      <hr class="header_label__separator" />
    </span>
  </header>
  <ol class="results dms">
    {{#each dms}}
      {{#feature flag="feature_name_tagging_client"}}
      <li data-replacement="{{../conversation_modifier}}{{getMemberAsContentsString this}}">
      {{else}}
      <li data-replacement="{{../conversation_modifier}}@{{name}}">
      {{/feature}}
        <button class="result_item_btn btn_unstyle" type="button" tabindex="-1">
          {{#if ../show_modifier}}
            <span>{{../conversation_modifier}}</span>
          {{/if}}

          {{#feature flag="feature_name_tagging_client"}}
            {{> member_menu_names}}
          {{else}}
            {{#if real_name}}
              <strong>{{real_name}} </strong>
              <span class="muted_text">@{{name}}</span>
            {{else}}
              <strong>@{{name}}</strong>
            {{/if}}
          {{/feature}}

          {{> ts_icon class="ts_icon_plus_square_o ts_icon_inherit modifier_icon"}}
        </button>
      </li>
    {{/each}}

    {{#if dms_deleted}}
      {{!-- TODO: reveal_hidden_items should not be a list item because it does not create an accurate representation of this list's count, but the way search-autocomplete-menu.js is built does not allow for an easy change :( --}}
      <li class="reveal_hidden_items">
        <button class="reveal_items_btn action_btn btn_unstyle" type="button">
          {{#t}}Show { dms_deleted.length, plural, =1 { # disabled account } other { # disabled accounts }}{{/t}}
        </button>
      </li>

      {{#each dms_deleted}}
        {{#feature flag="feature_name_tagging_client"}}
        <li data-replacement="{{../conversation_modifier}}{{getMemberAsContentsString this}}" class="hidden">
        {{else}}
        <li data-replacement="{{../conversation_modifier}}@{{name}}" class="hidden">
        {{/feature}}
          <button class="result_item_btn btn_unstyle" type="button" tabindex="-1">
            {{#if ../show_modifier}}
              <span>{{../conversation_modifier}}</span>
            {{/if}}
            {{#feature flag="feature_name_tagging_client"}}
              {{> member_menu_names}}
            {{else}}
              {{#if real_name}}
                <strong>{{real_name}} </strong>
                <span class="muted_text">@{{name}}</span>
              {{else}}
                <strong>@{{name}}</strong>
              {{/if}}
            {{/feature}}

            {{> ts_icon class="ts_icon_plus_square_o ts_icon_inherit modifier_icon"}}
          </button>
        </li>
      {{/each}}
    {{/if}}
  </ol>
{{/if}}

