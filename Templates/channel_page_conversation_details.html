{{i18n_ns "channel_pages"}}

{{!-- hbslint-disable syntax --}}
{{!-- Todo: enable syntax linter and refactor with safeString --}}

<div class="member_info {{#unlessUseUnifiedMemberDisplay}}display_flex{{/unlessUseUnifiedMemberDisplay}}">
  {{#shouldUseUnifiedMemberDisplay}}
    {{> c-member member=member size="large" linked=true}}
  {{else}}
    <div class="cursor_pointer flex_none" onclick="TS.client.ui.previewMember('{{member.id}}', 'im_page');">
      {{> member_preview_link_image (getMemberPreviewLinkImageArgs member.id 72 false true)}}
    </div>
    <div class="display_flex flex_direction_column justify_content_center no_min_width">
      {{#feature flag="feature_name_tagging_client"}}
        <div>
          <span class="member_name bold link cursor_pointer" onclick="TS.client.ui.previewMember('{{member.id}}', 'im_page');">
            {{#if member.is_slackbot}}{{#t}}Slackbot{{/t}}{{else}}{{getPrefCompliantMemberName member}}{{/if}}</span>
            {{#if member.profile}}
              {{#or member.profile.status_emoji member.profile.status_text}}
                {{> current_status classes="ts_tip_float"}}
              {{/or}}
            {{/if}}
        </div>
        <div class="block overflow_ellipsis">
          {{#memberHasSecondaryName member}}
            <span class="member_preferred_name mini">{{getMemberSecondaryName member}}</span>
          {{/memberHasSecondaryName}}
          {{{makeMemberPresenceIcon member}}}
          <span class="timezone_label mini greigh" data-member-id="{{member.id}}">{{{memberLocalTime member}}}</span>
        </div>
      {{else}}
        {{#if member.profile.real_name}}
          <div>
            <span class="member_name bold link cursor_pointer" onclick="TS.client.ui.previewMember('{{member.id}}', 'im_page');">
              {{#if member.is_slackbot}}{{#t}}Slackbot{{/t}}{{else}}{{member.profile.real_name}}{{/if}}</span>
              {{#if member.profile}}
                {{#or member.profile.status_emoji member.profile.status_text}}
                  {{> current_status classes="ts_tip_float"}}
                {{/or}}
              {{/if}}
          </div>
          <div class="block overflow_ellipsis">
            <span class="member_username mini">@{{member.name}}</span>
            {{{makeMemberPresenceIcon member}}}
            <span class="timezone_label mini greigh" data-member-id="{{member.id}}">{{{memberLocalTime member}}}</span>
          </div>
        {{else}}
          <div>
            <span class="member_name bold link cursor_pointer" onclick="TS.client.ui.previewMember('{{member.id}}', 'im_page');">
              {{member.name}}</span>
            {{#if member.profile}}
              {{#or member.profile.status_emoji member.profile.status_text}}
                {{> current_status classes="ts_tip_float"}}
              {{/or}}
            {{/if}}
            {{{makeMemberPresenceIcon member}}}
          </div>
          <div class="timezone_label mini greigh" data-member-id="{{member.id}}">{{{memberLocalTime member}}}</div>
        {{/if}}
      {{/feature}}
      <div class="member_title mini">
        {{#if member.is_slackbot}}
          {{#t new_win_name=(newWindowName) locale=(zdLocale)}}Friendly bot, part-time programmer, and <a href="https://get.slack.help/hc/{locale}" target="{new_win_name}">Help Center</a> assistant-in-training.{{/t}}
        {{else}}{{member.profile.title}}
        {{/if}}
      </div>
    </div>
    <div class="clearfix"></div>
  {{/shouldUseUnifiedMemberDisplay}}
</div>
