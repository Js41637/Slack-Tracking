{{i18n_ns "app_card"}}
<div
  class="app_card_header
      display_flex
      flex_direction_row
      align_items_flex_start
      {{#if large}}
        app_header_large rounded
      {{else}}
        rounded_top
        {{#unless hide_link_to_app_profile}}cursor_pointer{{/unless}}
      {{/if}}"

  {{!-- Styling for dynamic background color --}}
  {{#if color}}
    style="background: linear-gradient(136.53deg, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0.2) 100%), linear-gradient(312.01deg, {{color.hex}} 0%, rgba({{color.r}},{{color.g}},{{color.b}},0.75) 100%); background-color: #2C2D30;"
  {{/if}}
>
  {{#if emoji_img_tag}}
    <div class="app_card_emoji" data-qa="app_header_icon">{{emoji_img_tag}}</div>
  {{else}}
    <img class="app_card_header_icon rounded" data-qa="app_header_icon"
      {{#if bot_icons}}
        {{#if bot_icons.image_72}}
          src="{{bot_icons.image_72}}"
        {{else}}
          {{!-- Fallback for older integrations. --}}
          src="{{bot_icons.image_48}}"
        {{/if}}
      {{else if app_icons}}
        {{#if is_slack_integration}}
          {{!-- Slack owned apps have icons with transparent backgrounds (and position) below 192px. --}}
          src="{{app_icons.image_192}}"
        {{else if large}}
          src="{{app_icons.image_96}}" srcset="{{app_icons.image_96}} 1x, {{app_icons.image_192}} 2x"
        {{else}}
          src="{{app_icons.image_64}}" srcset="{{app_icons.image_64}} 1x, {{app_icons.image_128}} 2x"
        {{/if}}
      {{else}}
        src="{{versioned_default_application_icon}}"
      {{/if}}
    >
  {{/if}}
  <div class="app_card_header_text">
    <div class="app_card_name_row lato_black flexpane_grey display_flex align_items_center">
      <span class="app_name overflow_ellipsis" data-qa="app_header_name">{{name}}</span>
      <div><span class="app_label lato neutral_white" data-qa="app_header_app_label">{{!--
          --}}{{#feature flag="feature_app_cards_app_label"}}{{#t}}APP{{/t}}{{else}}{{#t}}BOT{{/t}}{{/feature}}{{!--
        --}}</span></div>
    </div>
    {{#if desc}}
      <div class="app_card_desc lato flexpane_grey overflow_hidden" data-qa="app_header_description">{{desc}}</div>
    {{/if}}
    {{#if app_profile}}
      <div class="app_profile_buttons">
        {{#unless deleted}}
          {{!-- Message button --}}
          {{#if bot_user}}
            <a class="btn app_profile_btn" type="button" data-js="app_profile_btn" data-action="open_bot_dm" href="/messages/@{{username}}" data-qa="app_header_message_button">{{#t}}Message{{/t}}</a>
          {{/if}}
          {{!-- Settings button --}}
          {{#if user_can_manage}}
            <a class="btn app_profile_btn" type="button" data-js="app_profile_btn" href="/services/{{bot_id}}" target="_blank" data-qa="app_header_settings_button">
              {{#t}}Settings{{/t}}
            </a>
          {{else}}
            <div class="ts_tip ts_tip_bottom ts_tip_float ts_tip_multiline">
              <a class="btn app_profile_btn disabled" type="button"  data-qa="app_header_settings_button">
                {{#t}}Settings{{/t}}
              </a>
              <span class="ts_tip_tip">
                <span class="ts_tip_multiline_inner">
                  {{#t}}Only certain users are allowed to edit apps.{{/t}}
                </span>
              </span>
            </div>
          {{/if}}
        {{/unless}}
        {{!-- Overflow menu button --}}
        {{#unless (and custom_integration_type (if_not_equal custom_integration_type compare="bot"))}}
          <button class="btn app_profile_btn" type="button" data-js="app_profile_btn" data-action="open_overflow_menu" data-qa="app_header_overflow_menu_button">
            <ts-icon class="ts_icon_chevron_large_down no_right_margin"></ts-icon>
          </button>
        {{/unless}}
      </div>
    {{/if}}
  </div>
</div>