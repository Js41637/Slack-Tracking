<div class="preview_actions{{#if preview_actions_class}} {{preview_actions_class}}{{/if}}">
  {{#if collapse}}<a class="file_preview_action preview_show_less_header btn btn_outline btn_icon ts_icon ts_icon_collapse_vertical ts_tip ts_tip_top ts_tip_float ts_tip_delay_300" title="Collapse"></a>{{/if}}

  {{#if download}}<a class="file_preview_action file_ssb_download_link btn btn_outline btn_icon ts_icon ts_icon_cloud_download ts_tip ts_tip_top ts_tip_float ts_tip_delay_300" data-file-id="{{file.id}}" href="{{file.url_private_download}}" target="{{newWindowName}}" title="Download"></a>{{/if}}

  {{#if edit}}<a class="file_preview_action file_new_window_link btn btn_outline btn_icon ts_icon {{#if_equal file.mode compare='snippet'}}ts_icon_pencil snippet_edit_dialog_link{{else}}ts_icon_external_link{{/if_equal}} ts_tip ts_tip_top ts_tip_float ts_tip_delay_300"
    {{#if_not_equal file.mode compare='snippet'}}
      href="{{file.permalink}}" target="{{file.permalink}}"
    {{else}}
      {{#if file.is_truncated}}
        href="{{file.edit_link}}" target="{{file.edit_link}}"
      {{/if}}
    {{/if_not_equal}}
    data-file-id="{{file.id}}"
    title="{{#if_equal file.mode compare='snippet'}}{{#if file.is_truncated}}Edit in new window{{else}}Edit{{/if}}{{else}}Edit in new window{{/if_equal}}"></a>{{/if}}

  {{#if new_window}}
    {{#if file.is_external}}
      <a class="file_preview_action btn btn_outline btn_icon ts_icon ts_icon_external_link ts_tip ts_tip_top ts_tip_float ts_tip_delay_300" href="{{file.url_private}}" target="{{newWindowName}}" title="Open file on {{#if_equal file.external_type compare="gdrive"}}Google Drive{{/if_equal}}{{#if_equal file.external_type compare="dropbox"}}Dropbox{{/if_equal}}{{#if_equal file.external_type compare="box"}}Box{{/if_equal}}{{#if_equal file.external_type compare="onedrive"}}OneDrive{{/if_equal}}{{#if_equal file.external_type compare="unknown"}}a web page{{/if_equal}}"></a>
    {{else}}
      {{#fileDefaultIsNewWindow id=file.id}}
        <a class="file_preview_action btn btn_outline btn_icon ts_icon ts_icon_external_link ts_tip ts_tip_top ts_tip_float ts_tip_delay_300" href="{{file.url_private}}" target="{{file.id}}" title="Open in new window"></a>
      {{else}}
        <a class="file_preview_action file_new_window_link btn btn_outline btn_icon ts_icon ts_icon_external_link ts_tip ts_tip_top ts_tip_float ts_tip_delay_300" data-file-id="{{file.id}}" href="{{file.permalink}}" target="{{file.permalink}}" title="Open in new window"></a>
      {{/fileDefaultIsNewWindow}}
    {{/if}}
  {{/if}}
  <a class="file_preview_action file_actions btn btn_outline btn_icon ts_icon ts_icon_ellipsis ts_tip ts_tip_top ts_tip_float ts_tip_delay_300"
    title="More actions"
    data-file-id="{{file.id}}"

    {{!--
      as we add file types to the file_viewer, we need to add more file_partial
      here leaving the logic in the template because this will all be removed
      once feature_file_viewer is removed and so it doesn\u2019t really matter
    --}}
    {{#if_not_equal file_partial compare="image"}}
      {{#isClient}}data-include-open-flexpane="true"{{/isClient}}
    {{/if_not_equal}}

    {{#isWeb}}data-include-open-file-page="true"{{/isWeb}}
    data-exclude-comment="true"
    data-exclude-print="true"
    data-include-view-public-link="true"
    {{#edit}}data-exclude-edit="true"{{/edit}}
    {{#if download}}data-exclude-download="true"{{/if}}
    {{#if_equal main_action compare="download"}}data-exclude-download="true"{{/if_equal}}
    {{#unless open_original}}
      {{#unless file.mode compare="snippet"}}
        {{#if new_window}}data-exclude-original="true"{{/if}}
        {{#if_equal main_action compare="new_window"}}data-exclude-original="true"{{/if_equal}}
      {{/unless}}
    {{/unless}}
  ></a>
  <a href="{{file.permalink}}" {{#isClient}}target="{{file.permalink}}"{{/isClient}}data-file-id="{{file.id}}" class="file_preview_action btn btn_outline file_preview_link file_comment_link file_force_flexpane">
    {{#if_equal file.comments_count compare=0}}
      <span>Add Comment</span>
    {{else}}
      {{#if_gt file.comments_count compare=1}}
        <span>{{file.comments_count}} Comments</span>
      {{else}}
        <span>{{file.comments_count}} Comment</span>
      {{/if_gt}}
    {{/if_equal}}
  </a>
</div>
